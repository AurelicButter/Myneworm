<div class="correction-display" *ngIf="isReady === 2">
    <div class="correction-title">
        <h2>Correction for ISBN {{correctionData.isbn}}</h2>
        <span class="status-tag" [ngClass]="determineStatusCSS()">{{determineStatus()}}</span>
    </div>
    <div class="correction-description">
        <div class="correction-info">
            <p class="info-label" *ngIf="!submitterUsername.startsWith('Removed User')">
                Submitted by: <a class="linked-user" href="/user/{{submitterUsername}}">{{submitterUsername}}</a>
            </p>
            <p class="info-label" *ngIf="submitterUsername.startsWith('Removed User')">
                Submitted by: {{submitterUsername}}
            </p>
            <p>{{correctionData.comment}}</p>
        </div>
        <div class="correction-info" *ngIf="correctionData.approved !== null">
            <p class="info-label">Reviewed by: </p>
            <p>{{correctionData.mod_note}}</p>
        </div>
    </div>
    <form>
        <div class="correction-section" *ngIf="correctionData">
            <label class="correction-label">Title</label>
            <div class="correction-comparison">
                <div class="correction-field">
                    <label class="correction-label-inner">New</label>
                    <input class="form-control correction-input title-input" type="text" name="title" [(ngModel)]="correctionData.title" disabled>
                </div>
                <div class="correction-field">
                    <label class="correction-label-inner">Old</label>
                    <input class="form-control correction-input title-input" type="text" value="{{bookData.title}}" disabled>
                </div>
            </div>
        </div>
        <div class="correction-section">
            <label class="correction-label">Cover Image</label>
            <div class="correction-comparison">
                <div class="correction-field">
                    <label class="correction-label-inner">New</label>
                    <img class="form-control correction-input" src="{{correctionData.cover_url}}" />
                </div>
                <div class="correction-field">
                    <label class="correction-label-inner">Old</label>
                    <img class="form-control correction-input" src="{{getImage()}}" />
                </div>
            </div>
        </div>
        <div class="correction-section">
            <label class="correction-label">Description</label>
            <div class="correction-comparison">
                <div class="correction-field">
                    <label class="correction-label-inner">New</label>
                    <textarea class="form-control correction-input" [formControl]="correctionDescription"></textarea>
                </div>
                <div class="correction-field">
                    <label class="correction-label-inner">Old</label>
                    <p *ngIf="bookData.description !== '' && bookData.description !== null" [innerHTML]="bookData.description"></p>
                    <p *ngIf="bookData.description === '' || bookData.description === null">No description available.</p>
                </div>
            </div>
            <label class="correction-label">Description Preview</label>
            <div [innerHTML]="correctionData.description"></div>
        </div>
        <div class="correction-section">
            <label class="correction-label">Release Date</label>
            <div class="correction-comparison">
                <div class="correction-field">
                    <label class="correction-label-inner">New</label>
                    <input class="form-control correction-input" type="date" name="releaseDate" [(ngModel)]="correctionData.release_date">
                </div>
                <div class="correction-field">
                    <label class="correction-label-inner">Old</label>
                    <input class="form-control correction-input" type="date" value="{{bookData.release_date.split('T')[0]}}" disabled>
                </div>
            </div>
        </div>
        <div class="correction-section" *ngIf="correctionData.publisher_id">
            <label class="correction-label">Imprint</label>
            <div class="correction-comparison">
                <div class="correction-field">
                    <label class="correction-label-inner" for="new-imprint">New</label>
                    <select class="form-select correction-input" name="new-imprint" [(ngModel)]="correctionData.publisher_id" disabled>
                        <option value=""></option>
                        <option *ngFor="let publisher of publishers" [ngValue]="publisher.publisher_id">
                            {{publisher.name}}
                        </option>
                    </select> 
                </div>
                <div class="correction-field">
                    <label class="correction-label-inner" for="old-imprint">Old</label>
                    <select class="form-select correction-input" name="old-imprint" [(ngModel)]="bookData.publisher_id" disabled>
                        <option value=""></option>
                        <option *ngFor="let publisher of publishers" [ngValue]="publisher.publisher_id">
                            {{publisher.name}}
                        </option>
                    </select> 
                </div>
            </div>
        </div>
        <div class="correction-section" *ngIf="correctionData.book_type">
            <label class="correction-label">Book Type</label>
            <div class="correction-comparison">
                <div class="correction-field">
                    <label class="correction-label-inner" for="new-type">New</label>
                    <select class="form-select correction-input" name="new-type" [(ngModel)]="correctionData.book_type" disabled>
                        <option value=""></option>
                        <option *ngFor="let type of types" [ngValue]="type.book_type_name">
                            {{this.utilities.toTitleCase(type.book_type_name)}}
                        </option>
                    </select> 
                </div>
                <div class="correction-field">
                    <label class="correction-label-inner" for="old-type">Old</label>
                    <select class="form-select correction-input" name="old-type" [(ngModel)]="bookData.book_type_name" disabled>
                        <option value=""></option>
                        <option *ngFor="let type of types" [ngValue]="type.book_type_name">
                            {{this.utilities.toTitleCase(type.book_type_name)}}
                        </option>
                    </select> 
                </div>
            </div>
        </div>
        <div class="correction-section" *ngIf="correctionData.format_name">
            <label class="correction-label">Format</label>
            <div class="correction-comparison">
                <div class="correction-field">
                    <label class="correction-label-inner" for="new-format">New</label>
                    <select class="form-select correction-input" name="new-format" [(ngModel)]="correctionData.format_name" disabled>
                        <option value=""></option>
                        <option *ngFor="let format of formats" [ngValue]="format.format_name">
                            {{this.utilities.formatReadable(format.format_name)}}
                        </option>
                    </select> 
                </div>
                <div class="correction-field">
                    <label class="correction-label-inner" for="old-format">Old</label>
                    <select class="form-select correction-input" name="old-format" [(ngModel)]="bookData.format_name" disabled>
                        <option value=""></option>
                        <option *ngFor="let format of formats" [ngValue]="format.format_name">
                            {{this.utilities.formatReadable(format.format_name)}}
                        </option>
                    </select> 
                </div>
            </div>
        </div>
        <!--<div class="correction-section">
            <label class="correction-label">Series</label>
            <div class="correction-comparison">
                <p class="no-correction">Not available yet...</p>
            </div>
        </div>  -->
    </form>
</div>

<div class="button-container">
    <a class="btn btn-lg myneworm-btn" role="button" (click)="returnPrevPage()">Go Back</a>
    <a class="btn btn-lg btn-danger" role="button" (click)="openModeratorModal('reject')">Reject</a>
    <a class="btn btn-lg btn-success" role="button" (click)="openModeratorModal('approve')">Approve</a>
</div>
